{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/lib/mock.ts"],"sourcesContent":["import type { Mode, Session } from \"@/lib/store\";\n\nexport const modeOptions: { value: Mode; label: string }[] = [\n  { value: \"smart\", label: \"Smart Notes\" },\n  { value: \"tasks\", label: \"Tasks\" },\n  { value: \"meeting\", label: \"Meeting Notes\" },\n  { value: \"email\", label: \"E-Mail Draft\" },\n];\n\nconst baseTranscript =\n  \"Heute haben wir die wichtigsten Punkte zum Projektstatus besprochen. Offene Fragen betreffen die Timeline, das Budget und die Abhaengigkeiten im Design. Naechste Schritte sind eine Review-Runde am Mittwoch und das Sammeln der Kundenfeedbacks.\";\n\nconst enrichedByMode: Record<Mode, string> = {\n  smart: [\n    \"**Kurzfassung**\",\n    \"- Projektstatus diskutiert, Fokus auf Timeline, Budget und Design-Abhaengigkeiten\",\n    \"- Review-Runde am Mittwoch, Kundenfeedback einsammeln\",\n    \"\",\n    \"**Entscheidungen**\",\n    \"- Design-Review wird als Gate fuer den naechsten Sprint genutzt\",\n    \"\",\n    \"**Naechste Schritte**\",\n    \"- Review-Agenda vorbereiten\",\n    \"- Feedback-Formular versenden\",\n  ].join(\"\\n\"),\n  tasks: [\n    \"- Review-Agenda fuer Mittwoch erstellen (Owner: Alex)\",\n    \"- Kundenfeedback einsammeln und clustern (Owner: Sam)\",\n    \"- Budgetfreigabe mit Finance abstimmen (Owner: Mia)\",\n    \"- Timeline-Update in den Projektplan einpflegen (Owner: Chris)\",\n  ].join(\"\\n\"),\n  meeting: [\n    \"**Meeting Notes**\",\n    \"- Thema: Projektstatus & naechste Schritte\",\n    \"- Diskussion: Timeline, Budget, Design-Abhaengigkeiten\",\n    \"- Beschluss: Design-Review als Gate fuer Sprintstart\",\n    \"- Follow-ups: Review-Agenda erstellen, Kundenfeedback sammeln\",\n  ].join(\"\\n\"),\n  email: [\n    \"Betreff: Projektstatus & naechste Schritte\",\n    \"\",\n    \"Hi Team,\",\n    \"\",\n    \"kurzes Update aus dem heutigen Gespraech: Wir haben Timeline, Budget und Design-Abhaengigkeiten geprueft. Als naechster Schritt planen wir die Review-Runde am Mittwoch und sammeln bis dahin das Kundenfeedback.\",\n    \"\",\n    \"Danke und viele Gruesse\",\n    \"[Dein Name]\",\n  ].join(\"\\n\"),\n};\n\nconst keywordsByMode: Record<Mode, string[]> = {\n  smart: [\"Timeline\", \"Budget\", \"Design\", \"Review\"],\n  tasks: [\"To-dos\", \"Owner\", \"Follow-up\"],\n  meeting: [\"Meeting\", \"Entscheidung\", \"Agenda\"],\n  email: [\"Update\", \"Team\", \"Naechste Schritte\"],\n};\n\nexport function generateMockContent(mode: Mode) {\n  return {\n    transcript: baseTranscript,\n    enriched: enrichedByMode[mode],\n    keywords: keywordsByMode[mode],\n  };\n}\n\nconst now = Date.now();\n\nexport const seedSessions: Session[] = [\n  {\n    id: \"sess-1\",\n    title: \"Projektstatus Update\",\n    createdAt: new Date(now - 1000 * 60 * 60 * 6).toISOString(),\n    mode: \"meeting\",\n    status: \"done\",\n    transcript: baseTranscript,\n    enriched: enrichedByMode.meeting,\n    metadata: {\n      durationSec: 92,\n      keywords: keywordsByMode.meeting,\n      whisperProvider: \"OpenAI Whisper API\",\n      llmProvider: \"OpenAI\",\n    },\n  },\n  {\n    id: \"sess-2\",\n    title: \"Follow-ups Kunde Atlas\",\n    createdAt: new Date(now - 1000 * 60 * 60 * 20).toISOString(),\n    mode: \"tasks\",\n    status: \"done\",\n    transcript: baseTranscript,\n    enriched: enrichedByMode.tasks,\n    metadata: {\n      durationSec: 64,\n      keywords: keywordsByMode.tasks,\n      whisperProvider: \"Local\",\n      llmProvider: \"Claude\",\n    },\n  },\n  {\n    id: \"sess-3\",\n    title: \"Weekly Summary\",\n    createdAt: new Date(now - 1000 * 60 * 60 * 30).toISOString(),\n    mode: \"smart\",\n    status: \"done\",\n    transcript: baseTranscript,\n    enriched: enrichedByMode.smart,\n    metadata: {\n      durationSec: 110,\n      keywords: keywordsByMode.smart,\n      whisperProvider: \"Gemini\",\n      llmProvider: \"Gemini\",\n    },\n  },\n];\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,cAAgD;IAC3D;QAAE,OAAO;QAAS,OAAO;IAAc;IACvC;QAAE,OAAO;QAAS,OAAO;IAAQ;IACjC;QAAE,OAAO;QAAW,OAAO;IAAgB;IAC3C;QAAE,OAAO;QAAS,OAAO;IAAe;CACzC;AAED,MAAM,iBACJ;AAEF,MAAM,iBAAuC;IAC3C,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD,CAAC,IAAI,CAAC;IACP,OAAO;QACL;QACA;QACA;QACA;KACD,CAAC,IAAI,CAAC;IACP,SAAS;QACP;QACA;QACA;QACA;QACA;KACD,CAAC,IAAI,CAAC;IACP,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD,CAAC,IAAI,CAAC;AACT;AAEA,MAAM,iBAAyC;IAC7C,OAAO;QAAC;QAAY;QAAU;QAAU;KAAS;IACjD,OAAO;QAAC;QAAU;QAAS;KAAY;IACvC,SAAS;QAAC;QAAW;QAAgB;KAAS;IAC9C,OAAO;QAAC;QAAU;QAAQ;KAAoB;AAChD;AAEO,SAAS,oBAAoB,IAAU;IAC5C,OAAO;QACL,YAAY;QACZ,UAAU,cAAc,CAAC,KAAK;QAC9B,UAAU,cAAc,CAAC,KAAK;IAChC;AACF;AAEA,MAAM,MAAM,KAAK,GAAG;AAEb,MAAM,eAA0B;IACrC;QACE,IAAI;QACJ,OAAO;QACP,WAAW,IAAI,KAAK,MAAM,OAAO,KAAK,KAAK,GAAG,WAAW;QACzD,MAAM;QACN,QAAQ;QACR,YAAY;QACZ,UAAU,eAAe,OAAO;QAChC,UAAU;YACR,aAAa;YACb,UAAU,eAAe,OAAO;YAChC,iBAAiB;YACjB,aAAa;QACf;IACF;IACA;QACE,IAAI;QACJ,OAAO;QACP,WAAW,IAAI,KAAK,MAAM,OAAO,KAAK,KAAK,IAAI,WAAW;QAC1D,MAAM;QACN,QAAQ;QACR,YAAY;QACZ,UAAU,eAAe,KAAK;QAC9B,UAAU;YACR,aAAa;YACb,UAAU,eAAe,KAAK;YAC9B,iBAAiB;YACjB,aAAa;QACf;IACF;IACA;QACE,IAAI;QACJ,OAAO;QACP,WAAW,IAAI,KAAK,MAAM,OAAO,KAAK,KAAK,IAAI,WAAW;QAC1D,MAAM;QACN,QAAQ;QACR,YAAY;QACZ,UAAU,eAAe,KAAK;QAC9B,UAAU;YACR,aAAa;YACb,UAAU,eAAe,KAAK;YAC9B,iBAAiB;YACjB,aAAa;QACf;IACF;CACD"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/lib/audioRecorder.ts"],"sourcesContent":["export class AudioRecorder {\n  private mediaRecorder: MediaRecorder | null = null;\n  private audioChunks: Blob[] = [];\n  private stream: MediaStream | null = null;\n  private audioContext: AudioContext | null = null;\n  private analyser: AnalyserNode | null = null;\n  private source: MediaStreamAudioSourceNode | null = null;\n  private rafId: number | null = null;\n  private onDataAvailable: ((blob: Blob) => void) | null = null;\n  private onError: ((error: Error) => void) | null = null;\n  private onLevel: ((level: number) => void) | null = null;\n\n  async initialize(): Promise<void> {\n    try {\n      this.stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          sampleRate: 16000,\n        },\n      });\n      if (!this.audioContext) {\n        const AudioContextCtor = window.AudioContext || (window as any).webkitAudioContext;\n        this.audioContext = new AudioContextCtor();\n        this.analyser = this.audioContext.createAnalyser();\n        this.analyser.fftSize = 256;\n        this.source = this.audioContext.createMediaStreamSource(this.stream);\n        this.source.connect(this.analyser);\n      }\n    } catch {\n      throw new Error(\"Microphone access denied. Please allow microphone access to record audio.\");\n    }\n  }\n\n  setOnDataAvailable(callback: (blob: Blob) => void): void {\n    this.onDataAvailable = callback;\n  }\n\n  setOnError(callback: (error: Error) => void): void {\n    this.onError = callback;\n  }\n\n  setOnLevel(callback: (level: number) => void): void {\n    this.onLevel = callback;\n  }\n\n  async startRecording(): Promise<void> {\n    if (!this.stream) await this.initialize();\n    this.audioChunks = [];\n    const mimeType = this.getSupportedMimeType();\n    this.mediaRecorder = mimeType\n      ? new MediaRecorder(this.stream!, { mimeType, audioBitsPerSecond: 128000 })\n      : new MediaRecorder(this.stream!);\n    this.mediaRecorder.ondataavailable = (event) => {\n      if (event.data.size > 0) this.audioChunks.push(event.data);\n    };\n    this.mediaRecorder.onstop = () => {\n      const resolvedType = mimeType || this.mediaRecorder?.mimeType || \"audio/webm\";\n      const audioBlob = new Blob(this.audioChunks, { type: resolvedType });\n      if (audioBlob.size < 1000) {\n        if (this.onError) this.onError(new Error(\"No audio captured. Please check microphone input.\"));\n        return;\n      }\n      if (this.onDataAvailable) this.onDataAvailable(audioBlob);\n    };\n    this.mediaRecorder.onerror = () => {\n      if (this.onError) this.onError(new Error(\"Recording error occurred\"));\n    };\n    if (this.audioContext?.state === \"suspended\") {\n      await this.audioContext.resume();\n    }\n    this.startMetering();\n    this.mediaRecorder.start(1000);\n  }\n\n  stopRecording(): void {\n    if (this.mediaRecorder && this.mediaRecorder.state !== \"inactive\") {\n      this.mediaRecorder.stop();\n    }\n  }\n\n  cleanup(): void {\n    this.stopRecording();\n    if (this.stream) {\n      this.stream.getTracks().forEach((track) => track.stop());\n      this.stream = null;\n    }\n    if (this.rafId !== null) {\n      cancelAnimationFrame(this.rafId);\n      this.rafId = null;\n    }\n    if (this.source) {\n      this.source.disconnect();\n      this.source = null;\n    }\n    if (this.analyser) {\n      this.analyser.disconnect();\n      this.analyser = null;\n    }\n    if (this.audioContext) {\n      void this.audioContext.close();\n      this.audioContext = null;\n    }\n    this.mediaRecorder = null;\n    this.audioChunks = [];\n  }\n\n  private startMetering(): void {\n    if (!this.analyser || !this.onLevel) return;\n    const data = new Uint8Array(this.analyser.fftSize);\n    const tick = () => {\n      if (!this.analyser) return;\n      this.analyser.getByteTimeDomainData(data);\n      let sum = 0;\n      for (let i = 0; i < data.length; i += 1) {\n        const normalized = (data[i] - 128) / 128;\n        sum += normalized * normalized;\n      }\n      const rms = Math.sqrt(sum / data.length);\n      this.onLevel?.(Math.min(1, rms * 2));\n      this.rafId = requestAnimationFrame(tick);\n    };\n    this.rafId = requestAnimationFrame(tick);\n  }\n\n  private getSupportedMimeType(): string | null {\n    const mimeTypes = [\n      \"audio/webm;codecs=opus\",\n      \"audio/webm\",\n      \"audio/ogg;codecs=opus\",\n      \"audio/mp4\",\n      \"audio/mpeg\",\n    ];\n    for (const mimeType of mimeTypes) {\n      if (MediaRecorder.isTypeSupported(mimeType)) return mimeType;\n    }\n    return null;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/lib/processing.ts"],"sourcesContent":["\"use client\";\n\nimport type { Mode, Settings } from \"@/lib/store\";\n\nconst OPENAI_BASE_URL = \"https://api.openai.com\";\nconst OPENAI_WHISPER_MODEL = \"whisper-1\";\nconst MAX_AUDIO_BYTES = 25 * 1024 * 1024;\n\nconst STOPWORDS = new Set([\n  \"und\",\n  \"oder\",\n  \"aber\",\n  \"mit\",\n  \"ohne\",\n  \"wir\",\n  \"ihr\",\n  \"sie\",\n  \"ich\",\n  \"du\",\n  \"der\",\n  \"die\",\n  \"das\",\n  \"ein\",\n  \"eine\",\n  \"einer\",\n  \"einem\",\n  \"auf\",\n  \"aus\",\n  \"von\",\n  \"fÃ¼r\",\n  \"zum\",\n  \"zur\",\n  \"den\",\n  \"dem\",\n  \"des\",\n  \"im\",\n  \"in\",\n  \"an\",\n  \"am\",\n  \"to\",\n  \"the\",\n  \"a\",\n  \"an\",\n  \"and\",\n  \"or\",\n  \"but\",\n  \"with\",\n  \"without\",\n  \"we\",\n  \"you\",\n  \"they\",\n  \"is\",\n  \"are\",\n  \"was\",\n  \"were\",\n  \"be\",\n  \"for\",\n  \"of\",\n  \"on\",\n  \"at\",\n  \"in\",\n  \"this\",\n  \"that\",\n  \"these\",\n  \"those\",\n]);\n\nfunction resolveEndpoint(base: string | undefined, path: string, fallbackBase = OPENAI_BASE_URL) {\n  const trimmed = (base ?? \"\").trim();\n  if (!trimmed) return `${fallbackBase}${path}`;\n  if (trimmed.includes(path)) return trimmed;\n  const normalized = trimmed.endsWith(\"/\") ? trimmed.slice(0, -1) : trimmed;\n  if (normalized.endsWith(\"/v1\") && path.startsWith(\"/v1\")) {\n    return `${normalized}${path.slice(3)}`;\n  }\n  return `${normalized}${path}`;\n}\n\nasync function readErrorMessage(response: Response) {\n  const fallback = `Request failed (${response.status})`;\n  try {\n    const data = await response.json();\n    return data?.error?.message || data?.message || fallback;\n  } catch {\n    try {\n      const text = await response.text();\n      return text || fallback;\n    } catch {\n      return fallback;\n    }\n  }\n}\n\nfunction extractResponseText(payload: any) {\n  if (!payload) return \"\";\n  if (typeof payload.output_text === \"string\" && payload.output_text.trim()) {\n    return payload.output_text.trim();\n  }\n  if (Array.isArray(payload.output)) {\n    let result = \"\";\n    for (const item of payload.output) {\n      if (item?.type === \"message\" && Array.isArray(item.content)) {\n        for (const part of item.content) {\n          if (part?.type === \"output_text\" && typeof part.text === \"string\") {\n            result += part.text;\n          }\n        }\n      }\n    }\n    if (result.trim()) return result.trim();\n  }\n  if (Array.isArray(payload.choices)) {\n    const content = payload.choices[0]?.message?.content;\n    if (typeof content === \"string\") return content.trim();\n  }\n  return \"\";\n}\n\nfunction getModePrompt(mode: Mode) {\n  switch (mode) {\n    case \"tasks\":\n      return \"Extract all action items and tasks as a short bullet list. Keep each item concise.\";\n    case \"meeting\":\n      return [\n        \"Create well-structured meeting notes:\",\n        \"- Summary\",\n        \"- Key points\",\n        \"- Decisions\",\n        \"- Action items\",\n      ].join(\"\\n\");\n    case \"email\":\n      return \"Draft a concise professional email based on the transcript. Include a subject line.\";\n    case \"smart\":\n    default:\n      return [\n        \"Create smart notes with:\",\n        \"- Short summary\",\n        \"- Decisions\",\n        \"- Next steps\",\n      ].join(\"\\n\");\n  }\n}\n\nexport function extractKeywords(text: string, limit = 4) {\n  const tokens = text\n    .toLowerCase()\n    .replace(/[^\\p{L}\\p{N}\\s]/gu, \" \")\n    .split(/\\s+/)\n    .filter((token) => token.length > 2 && !STOPWORDS.has(token));\n  const counts = new Map<string, number>();\n  tokens.forEach((token) => counts.set(token, (counts.get(token) ?? 0) + 1));\n  return Array.from(counts.entries())\n    .sort((a, b) => b[1] - a[1])\n    .slice(0, limit)\n    .map(([token]) => token);\n}\n\nexport async function transcribeAudio(blob: Blob, settings: Settings) {\n  if (settings.privacy.offline) {\n    throw new Error(\"Offline mode is enabled. Disable it to use cloud transcription.\");\n  }\n  if (settings.whisper.provider === \"Local\") {\n    throw new Error(\"Local transcription is not configured.\");\n  }\n  if (settings.whisper.provider === \"Other\" && !settings.whisper.endpoint.trim()) {\n    throw new Error(\"Custom Whisper endpoint is required.\");\n  }\n  if (!settings.whisper.apiKey) {\n    throw new Error(\"Missing Whisper API key in Settings.\");\n  }\n  if (blob.size > MAX_AUDIO_BYTES) {\n    throw new Error(\"Audio file is larger than 25MB. Please record a shorter clip.\");\n  }\n\n  const endpoint = resolveEndpoint(settings.whisper.endpoint, \"/v1/audio/transcriptions\");\n  const formData = new FormData();\n  formData.append(\"file\", blob, \"recording.webm\");\n  formData.append(\"model\", OPENAI_WHISPER_MODEL);\n  formData.append(\"response_format\", \"text\");\n  if (settings.whisper.language !== \"Auto\") {\n    formData.append(\"language\", settings.whisper.language);\n  }\n\n  const response = await fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${settings.whisper.apiKey}`,\n    },\n    body: formData,\n  });\n\n  if (!response.ok) {\n    throw new Error(await readErrorMessage(response));\n  }\n\n  const contentType = response.headers.get(\"content-type\") ?? \"\";\n  if (contentType.includes(\"application/json\")) {\n    const data = await response.json();\n    const text = data?.text ?? data?.transcript ?? \"\";\n    if (!text) throw new Error(\"Transcription returned no text.\");\n    return text.trim();\n  }\n  const text = await response.text();\n  if (!text.trim()) throw new Error(\"Transcription returned no text.\");\n  return text.trim();\n}\n\nexport async function enrichTranscript(transcript: string, mode: Mode, settings: Settings) {\n  if (!transcript.trim()) {\n    throw new Error(\"No transcript to enrich.\");\n  }\n  if (settings.privacy.offline) {\n    throw new Error(\"Offline mode is enabled. Disable it to use cloud enrichment.\");\n  }\n  if (settings.llm.provider === \"Local\") {\n    throw new Error(\"Local LLM is not configured.\");\n  }\n  if (!settings.llm.apiKey) {\n    throw new Error(\"Missing LLM API key in Settings.\");\n  }\n  if (settings.llm.provider !== \"OpenAI\" && !settings.llm.baseUrl.trim()) {\n    throw new Error(\"Base URL is required for non-OpenAI providers.\");\n  }\n\n  const endpoint = resolveEndpoint(settings.llm.baseUrl, \"/v1/responses\");\n  const systemPrompt = `${getModePrompt(mode)}\\n\\nRespond in the same language as the transcript.`;\n  const response = await fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${settings.llm.apiKey}`,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      model: settings.llm.model || \"gpt-4o-mini\",\n      input: [\n        { role: \"system\", content: systemPrompt },\n        { role: \"user\", content: transcript },\n      ],\n      temperature: 0.3,\n      max_output_tokens: 1200,\n    }),\n  });\n\n  if (!response.ok) {\n    throw new Error(await readErrorMessage(response));\n  }\n\n  const payload = await response.json();\n  const enriched = extractResponseText(payload);\n  if (!enriched) {\n    throw new Error(\"Enrichment returned no text.\");\n  }\n\n  return {\n    enriched,\n    keywords: extractKeywords(enriched),\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 548, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/lib/store.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { seedSessions } from \"@/lib/mock\";\nimport { AudioRecorder } from \"@/lib/audioRecorder\";\nimport { enrichTranscript, transcribeAudio, extractKeywords } from \"@/lib/processing\";\n\nexport type Mode = \"smart\" | \"tasks\" | \"meeting\" | \"email\";\nexport type SessionStatus = \"idle\" | \"recording\" | \"processing\" | \"done\" | \"error\";\nexport type ProcessingStage = \"transcribing\" | \"enriching\";\n\nexport type Session = {\n  id: string;\n  title: string;\n  createdAt: string;\n  mode: Mode;\n  status: SessionStatus;\n  stage?: ProcessingStage;\n  transcript: string;\n  enriched: string;\n  audioUrl?: string;\n  recordingStartedAt?: number;\n  errorMessage?: string;\n  errorDetails?: string;\n  metadata: {\n    durationSec: number;\n    keywords: string[];\n    whisperProvider: string;\n    llmProvider: string;\n  };\n};\n\nexport type Settings = {\n  theme: \"system\" | \"light\" | \"dark\";\n  hotkey: string;\n  whisper: {\n    provider: \"Local\" | \"OpenAI Whisper API\" | \"Other\";\n    apiKey: string;\n    endpoint: string;\n    language: \"Auto\" | \"de\" | \"en\" | \"th\";\n  };\n  llm: {\n    provider: \"Local\" | \"OpenAI\" | \"Gemini\" | \"Claude\" | \"Grok\";\n    model: string;\n    apiKey: string;\n    baseUrl: string;\n  };\n  privacy: {\n    offline: boolean;\n    storeAudio: boolean;\n  };\n};\n\nconst defaultSettings: Settings = {\n  theme: \"system\",\n  hotkey: \"Ctrl+Shift+R\",\n  whisper: {\n    provider: \"Local\",\n    apiKey: \"\",\n    endpoint: \"\",\n    language: \"Auto\",\n  },\n  llm: {\n    provider: \"Local\",\n    model: \"Local Default\",\n    apiKey: \"\",\n    baseUrl: \"\",\n  },\n  privacy: {\n    offline: false,\n    storeAudio: true,\n  },\n};\n\nconst SETTINGS_KEY = \"vi-settings\";\nconst SESSIONS_KEY = \"vi-sessions\";\nconst SETTINGS_FILE = \"voice-intelligence-settings.json\";\nconst SESSIONS_FILE = \"voice-intelligence-sessions.json\";\n\nconst isTauri = () => typeof window !== \"undefined\" && \"__TAURI__\" in window;\n\nasync function readFromTauri(filename: string) {\n  if (!isTauri()) return null;\n  try {\n    const { readTextFile, exists, BaseDirectory } = await import(\"@tauri-apps/api/fs\");\n    const fileExists = await exists(filename, { dir: BaseDirectory.AppConfig });\n    if (!fileExists) return null;\n    return await readTextFile(filename, { dir: BaseDirectory.AppConfig });\n  } catch {\n    return null;\n  }\n}\n\nasync function writeToTauri(filename: string, contents: string) {\n  if (!isTauri()) return;\n  try {\n    const { writeFile, BaseDirectory } = await import(\"@tauri-apps/api/fs\");\n    await writeFile({ path: filename, contents }, { dir: BaseDirectory.AppConfig });\n  } catch {\n    // ignore\n  }\n}\n\nfunction safeParseJson<T>(value: string | null, fallback: T): T {\n  if (!value) return fallback;\n  try {\n    return JSON.parse(value) as T;\n  } catch {\n    return fallback;\n  }\n}\n\ntype StoreState = {\n  sessions: Session[];\n  activeSessionId: string | null;\n  searchQuery: string;\n  mode: Mode;\n  settings: Settings;\n  recordingLevel: number;\n};\n\ntype StoreActions = {\n  setSearchQuery: (value: string) => void;\n  setMode: (mode: Mode) => void;\n  selectSession: (id: string) => void;\n  createEmptySession: () => void;\n  deleteSession: (id: string) => void;\n  startRecording: () => Promise<void>;\n  stopRecording: () => void;\n  uploadAudio: (file: File) => void;\n  retryProcessing: () => void;\n  updateSessionTitle: (id: string, title: string) => void;\n  updateSettings: (settings: Settings) => Promise<void>;\n  toggleTheme: () => void;\n};\n\nconst StoreContext = createContext<{ state: StoreState; actions: StoreActions } | null>(null);\n\nfunction getRandomId() {\n  if (typeof crypto !== \"undefined\" && \"randomUUID\" in crypto) {\n    return crypto.randomUUID();\n  }\n  return `sess-${Math.random().toString(36).slice(2, 10)}`;\n}\n\nfunction applyTheme(theme: Settings[\"theme\"]) {\n  if (typeof document === \"undefined\") return;\n  const root = document.documentElement;\n  const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n  const resolved = theme === \"system\" ? (prefersDark ? \"dark\" : \"light\") : theme;\n  root.classList.toggle(\"dark\", resolved === \"dark\");\n}\n\n\nexport function AppStoreProvider({ children }: { children: React.ReactNode }) {\n  const [sessions, setSessions] = useState<Session[]>(seedSessions);\n  const [activeSessionId, setActiveSessionId] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [mode, setMode] = useState<Mode>(\"smart\");\n  const [settings, setSettings] = useState<Settings>(defaultSettings);\n  const [isHydrated, setIsHydrated] = useState(false);\n  const [recordingLevel, setRecordingLevel] = useState(0);\n  const hasLoadedSessions = useRef(false);\n  const hasUserUpdatedSettings = useRef(false);\n  const hasUserModifiedSessions = useRef(false);\n  const recorderRef = useRef<AudioRecorder | null>(null);\n  const recordingSessionIdRef = useRef<string | null>(null);\n  const audioBlobsRef = useRef<Record<string, Blob>>({});\n  const sessionsRef = useRef<Session[]>(sessions);\n  const settingsRef = useRef<Settings>(settings);\n  const modeRef = useRef<Mode>(mode);\n\n  useEffect(() => {\n    let active = true;\n    const load = async () => {\n      const localSettings = safeParseJson<Settings>(\n        typeof window !== \"undefined\" ? localStorage.getItem(SETTINGS_KEY) : null,\n        defaultSettings\n      );\n      const localSessions = safeParseJson<Session[]>(\n        typeof window !== \"undefined\" ? localStorage.getItem(SESSIONS_KEY) : null,\n        seedSessions\n      );\n\n      const tauriSettingsRaw = await readFromTauri(SETTINGS_FILE);\n      const tauriSessionsRaw = await readFromTauri(SESSIONS_FILE);\n      const tauriSettings = safeParseJson<Settings>(tauriSettingsRaw, localSettings);\n      const tauriSessions = safeParseJson<Session[]>(tauriSessionsRaw, localSessions);\n\n      const loadedSettings = tauriSettingsRaw ? tauriSettings : localSettings;\n      const loadedSessions = tauriSessionsRaw ? tauriSessions : localSessions;\n\n      if (!active) return;\n      if (!hasUserUpdatedSettings.current) {\n        setSettings(loadedSettings);\n      }\n      if (!hasUserModifiedSessions.current) {\n        setSessions(loadedSessions.length ? loadedSessions : seedSessions);\n      }\n      hasLoadedSessions.current = true;\n      setIsHydrated(true);\n    };\n\n    void load();\n    return () => {\n      active = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    sessionsRef.current = sessions;\n  }, [sessions]);\n\n  useEffect(() => {\n    settingsRef.current = settings;\n  }, [settings]);\n\n  useEffect(() => {\n    modeRef.current = mode;\n  }, [mode]);\n\n  useEffect(() => {\n    if (!isHydrated && !hasUserUpdatedSettings.current) return;\n    const payload = JSON.stringify(settings);\n    try {\n      if (typeof window !== \"undefined\") {\n        localStorage.setItem(SETTINGS_KEY, payload);\n      }\n    } catch {\n      // ignore\n    }\n    void writeToTauri(SETTINGS_FILE, payload);\n    applyTheme(settings.theme);\n  }, [settings, isHydrated]);\n\n  const createSession = (partial: Partial<Session>) => {\n    const newSession: Session = {\n      id: getRandomId(),\n      title: \"Untitled\",\n      createdAt: new Date().toISOString(),\n      mode,\n      status: \"idle\",\n      transcript: \"\",\n      enriched: \"\",\n      audioUrl: undefined,\n      metadata: {\n        durationSec: 0,\n        keywords: [],\n        whisperProvider: settings.whisper.provider,\n        llmProvider: settings.llm.provider,\n      },\n      ...partial,\n    };\n    hasUserModifiedSessions.current = true;\n    setSessions((prev) => {\n      const next = [newSession, ...prev];\n      const serializable = next.map(({ audioUrl, ...rest }) => rest);\n      try {\n        if (typeof window !== \"undefined\") {\n          localStorage.setItem(SESSIONS_KEY, JSON.stringify(serializable));\n        }\n      } catch {\n        // ignore\n      }\n      void writeToTauri(SESSIONS_FILE, JSON.stringify(serializable));\n      return next;\n    });\n    setActiveSessionId(newSession.id);\n    return newSession;\n  };\n\n  const updateSession = (id: string, updates: Partial<Session>) => {\n    hasUserModifiedSessions.current = true;\n    setSessions((prev) => {\n      const next = prev.map((session) =>\n        session.id === id ? { ...session, ...updates } : session\n      );\n      const serializable = next.map(({ audioUrl, ...rest }) => rest);\n      try {\n        if (typeof window !== \"undefined\") {\n          localStorage.setItem(SESSIONS_KEY, JSON.stringify(serializable));\n        }\n      } catch {\n        // ignore\n      }\n      void writeToTauri(SESSIONS_FILE, JSON.stringify(serializable));\n      return next;\n    });\n  };\n\n  const getSessionById = (id: string) => sessionsRef.current.find((session) => session.id === id);\n\n  const setAudioBlob = (id: string, blob: Blob) => {\n    audioBlobsRef.current[id] = blob;\n  };\n\n  const clearAudioBlob = (id: string) => {\n    delete audioBlobsRef.current[id];\n  };\n\n  const buildErrorDetails = (\n    stage: \"transcribing\" | \"enriching\",\n    settingsSnapshot: Settings,\n    message: string\n  ) => {\n    const lines = [\n      `Stage: ${stage}`,\n      `Whisper provider: ${settingsSnapshot.whisper.provider}`,\n      `LLM provider: ${settingsSnapshot.llm.provider}`,\n    ];\n    if (stage === \"transcribing\") {\n      lines.push(\n        `Whisper endpoint: ${settingsSnapshot.whisper.endpoint || \"default\"}`\n      );\n    } else {\n      lines.push(`LLM base URL: ${settingsSnapshot.llm.baseUrl || \"default\"}`);\n    }\n    lines.push(`Message: ${message}`);\n    return lines.join(\"\\n\");\n  };\n\n  const getActiveSession = () => sessions.find((session) => session.id === activeSessionId) ?? null;\n\n  const processAudio = async (sessionId: string, blob: Blob, durationSec: number) => {\n    const settingsSnapshot = settingsRef.current;\n    const sessionSnapshot = getSessionById(sessionId);\n    const sessionMode = sessionSnapshot?.mode ?? modeRef.current;\n    const baseMetadata = sessionSnapshot?.metadata ?? {\n      durationSec: 0,\n      keywords: [],\n      whisperProvider: settingsSnapshot.whisper.provider,\n      llmProvider: settingsSnapshot.llm.provider,\n    };\n\n    updateSession(sessionId, {\n      status: \"processing\",\n      stage: \"transcribing\",\n      transcript: \"\",\n      enriched: \"\",\n      errorMessage: undefined,\n      recordingStartedAt: undefined,\n      metadata: {\n        ...baseMetadata,\n        durationSec,\n        whisperProvider: settingsSnapshot.whisper.provider,\n        llmProvider: settingsSnapshot.llm.provider,\n      },\n    });\n\n    let transcript = \"\";\n    try {\n      transcript = await transcribeAudio(blob, settingsSnapshot);\n      updateSession(sessionId, {\n        transcript,\n        stage: \"enriching\",\n        errorMessage: undefined,\n        errorDetails: undefined,\n      });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : \"Transcription failed.\";\n      updateSession(sessionId, {\n        status: \"error\",\n        stage: undefined,\n        errorMessage: message,\n        errorDetails: buildErrorDetails(\"transcribing\", settingsSnapshot, message),\n      });\n      if (!settingsSnapshot.privacy.storeAudio) {\n        clearAudioBlob(sessionId);\n      }\n      return;\n    }\n\n    try {\n      const { enriched, keywords } = await enrichTranscript(transcript, sessionMode, settingsSnapshot);\n      updateSession(sessionId, {\n        status: \"done\",\n        stage: undefined,\n        enriched,\n        errorMessage: undefined,\n        errorDetails: undefined,\n        metadata: {\n          ...baseMetadata,\n          durationSec,\n          keywords: keywords.length ? keywords : extractKeywords(transcript),\n          whisperProvider: settingsSnapshot.whisper.provider,\n          llmProvider: settingsSnapshot.llm.provider,\n        },\n      });\n    } catch (error) {\n      const message = error instanceof Error ? error.message : \"Enrichment failed.\";\n      updateSession(sessionId, {\n        status: \"error\",\n        stage: undefined,\n        errorMessage: message,\n        errorDetails: buildErrorDetails(\"enriching\", settingsSnapshot, message),\n      });\n    } finally {\n      if (!settingsSnapshot.privacy.storeAudio) {\n        clearAudioBlob(sessionId);\n      }\n    }\n  };\n\n  const cleanupRecorder = () => {\n    if (recorderRef.current) {\n      recorderRef.current.cleanup();\n    }\n    recorderRef.current = null;\n    recordingSessionIdRef.current = null;\n  };\n\n  const actions: StoreActions = {\n    setSearchQuery,\n    setMode,\n    selectSession: (id) => setActiveSessionId(id),\n    createEmptySession: () => {\n      createSession({ status: \"idle\" });\n    },\n    deleteSession: (id) => {\n      hasUserModifiedSessions.current = true;\n      const existing = getSessionById(id);\n      if (existing?.audioUrl) {\n        try {\n          URL.revokeObjectURL(existing.audioUrl);\n        } catch {\n          // ignore\n        }\n      }\n      clearAudioBlob(id);\n      setSessions((prev) => {\n        const next = prev.filter((session) => session.id !== id);\n        const serializable = next.map(({ audioUrl, ...rest }) => rest);\n        try {\n          if (typeof window !== \"undefined\") {\n            localStorage.setItem(SESSIONS_KEY, JSON.stringify(serializable));\n          }\n        } catch {\n          // ignore\n        }\n        void writeToTauri(SESSIONS_FILE, JSON.stringify(serializable));\n        if (activeSessionId === id) {\n          setActiveSessionId(next[0]?.id ?? null);\n        }\n        return next;\n      });\n    },\n    startRecording: async () => {\n      if (\n        typeof navigator === \"undefined\" ||\n        !navigator.mediaDevices?.getUserMedia ||\n        typeof MediaRecorder === \"undefined\"\n      ) {\n        createSession({\n          status: \"error\",\n          title: \"Microphone unavailable\",\n          errorMessage: \"Microphone access is not supported in this environment.\",\n        });\n        return;\n      }\n\n      try {\n        cleanupRecorder();\n        const active = getActiveSession();\n        const sessionId =\n          active && active.status === \"idle\" && !active.transcript && !active.enriched\n            ? active.id\n            : createSession({\n                status: \"recording\",\n                recordingStartedAt: Date.now(),\n                title: \"Untitled\",\n              }).id;\n\n        if (active && active.id === sessionId) {\n          updateSession(active.id, {\n            status: \"recording\",\n            recordingStartedAt: Date.now(),\n            mode,\n            errorMessage: undefined,\n            metadata: {\n              ...active.metadata,\n              whisperProvider: settings.whisper.provider,\n              llmProvider: settings.llm.provider,\n            },\n          });\n        }\n\n        recordingSessionIdRef.current = sessionId;\n        const recorder = new AudioRecorder();\n        recorderRef.current = recorder;\n        setRecordingLevel(0);\n\n        recorder.setOnDataAvailable(async (blob) => {\n          const targetId = recordingSessionIdRef.current ?? sessionId;\n          if (!targetId) {\n            cleanupRecorder();\n            return;\n          }\n          setAudioBlob(targetId, blob);\n          if (settingsRef.current.privacy.storeAudio) {\n            const url = URL.createObjectURL(blob);\n          updateSession(targetId, { audioUrl: url, errorMessage: undefined, errorDetails: undefined });\n        } else {\n          updateSession(targetId, { errorMessage: undefined, errorDetails: undefined });\n        }\n\n          const currentSession = getSessionById(targetId);\n          const elapsed = currentSession?.recordingStartedAt\n            ? Math.max(0, Math.floor((Date.now() - currentSession.recordingStartedAt) / 1000))\n            : 0;\n          await processAudio(targetId, blob, elapsed);\n          cleanupRecorder();\n        });\n\n        recorder.setOnError((error) => {\n          const targetId = recordingSessionIdRef.current ?? sessionId;\n          if (targetId) {\n            updateSession(targetId, {\n              status: \"error\",\n              errorMessage: error.message,\n              errorDetails: buildErrorDetails(\"transcribing\", settingsRef.current, error.message),\n            });\n          }\n          cleanupRecorder();\n        });\n\n        recorder.setOnLevel((level) => {\n          setRecordingLevel((prev) => (Math.abs(prev - level) > 0.02 ? level : prev));\n        });\n\n        await recorder.startRecording();\n      } catch (error) {\n        const message =\n          error instanceof Error\n            ? error.message\n            : \"Microphone access was denied. Please allow access and try again.\";\n        const targetId = recordingSessionIdRef.current;\n        if (targetId) {\n          updateSession(targetId, {\n            status: \"error\",\n            recordingStartedAt: undefined,\n            errorMessage: message,\n            errorDetails: buildErrorDetails(\"transcribing\", settingsRef.current, message),\n          });\n        } else {\n          createSession({\n            status: \"error\",\n            title: \"Microphone blocked\",\n            errorMessage: message,\n            errorDetails: buildErrorDetails(\"transcribing\", settingsRef.current, message),\n          });\n        }\n        cleanupRecorder();\n      }\n    },\n    stopRecording: () => {\n      if (recorderRef.current) {\n        recorderRef.current.stopRecording();\n      }\n      setRecordingLevel(0);\n    },\n    uploadAudio: (file: File) => {\n      if (!file) return;\n      const session = createSession({\n        status: \"processing\",\n        stage: \"transcribing\",\n        title: file.name || \"Audio Upload\",\n      });\n      setAudioBlob(session.id, file);\n      if (settingsRef.current.privacy.storeAudio) {\n        const url = URL.createObjectURL(file);\n        updateSession(session.id, { audioUrl: url });\n      }\n      void processAudio(session.id, file, 0);\n    },\n    retryProcessing: () => {\n      const active = getActiveSession();\n      if (!active) return;\n      const blob = audioBlobsRef.current[active.id];\n      if (!blob) {\n        updateSession(active.id, {\n          status: \"error\",\n          stage: undefined,\n          errorMessage: \"Audio file not available for retry.\",\n          errorDetails: \"Audio blob not found. Try recording again or re-upload the file.\",\n        });\n        return;\n      }\n      void processAudio(active.id, blob, active.metadata.durationSec);\n    },\n    updateSessionTitle: (id, title) =>\n      updateSession(id, { title: title.trim() ? title : \"Untitled\" }),\n    updateSettings: async (nextSettings) => {\n      hasUserUpdatedSettings.current = true;\n      setSettings(nextSettings);\n      const payload = JSON.stringify(nextSettings);\n      try {\n        if (typeof window !== \"undefined\") {\n          localStorage.setItem(SETTINGS_KEY, payload);\n        }\n      } catch {\n        // ignore\n      }\n      void writeToTauri(SETTINGS_FILE, payload);\n    },\n    toggleTheme: () => {\n      setSettings((prev) => ({\n        ...prev,\n        theme: prev.theme === \"dark\" ? \"light\" : \"dark\",\n      }));\n    },\n  };\n\n  const value = useMemo(\n    () => ({\n      state: {\n        sessions,\n        activeSessionId,\n        searchQuery,\n        mode,\n        settings,\n        recordingLevel,\n      },\n      actions,\n    }),\n    [sessions, activeSessionId, searchQuery, mode, settings, recordingLevel]\n  );\n\n  return <StoreContext.Provider value={value}>{children}</StoreContext.Provider>;\n}\n\nexport function useAppStore() {\n  const context = useContext(StoreContext);\n  if (!context) {\n    throw new Error(\"useAppStore must be used within AppStoreProvider\");\n  }\n  return context;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1083, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/app/providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { AppStoreProvider } from \"@/lib/store\";\n\nexport function AppProviders({ children }: { children: React.ReactNode }) {\n  return <AppStoreProvider>{children}</AppStoreProvider>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,qBAAO,+YAAC,iIAAgB;kBAAE;;;;;;AAC5B"}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.28.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 1124, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.28.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,0NACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 1129, "column": 0}, "map": {"version":3,"sources":["file:///Users/jensdietrich/workspace/prj/ai-voice-note/node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.28.6_react-dom%4019.2.4_react%4019.2.4__react%4019.2.4/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,0NACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}